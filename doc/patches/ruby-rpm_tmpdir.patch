--- ext/rpm/rpm.c	2004-05-29 12:14:20.000000000 +0200
+++ ext/rpm/rpm.c.new	2004-07-02 19:10:45.446181368 +0200
@@ -631,7 +631,9 @@
 	if (!temp) {
 		temp = "/tmp";
 	} else {
-		temp = strchr(temp, '=') + 1;
+		char * tmpdir;
+		tmpdir = strchr(temp, '=');
+		if(tmpdir) temp = tmpdir + 1;
 	}
 
 	ruby_rpm_temp_format = rb_str_new2(temp);
